<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>GraphQL整理 - hachi&#39;s blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="GraphQL整理" />
<meta property="og:description" content="マイクロサービス案件に参画して4ヶ月が経過しで身につけたことを整理したくなってきたので
キャッチアップしやすかったGraphQLから整理していこうと思う。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://m-88888888.github.io/posts/graphql%E3%81%AE%E8%B6%85%E5%9F%BA%E7%A4%8E%E3%81%AE%E6%95%B4%E7%90%86/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-07T00:00:10+09:00" />
<meta property="article:modified_time" content="2021-02-07T00:00:10+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="GraphQL整理"/>
<meta name="twitter:description" content="マイクロサービス案件に参画して4ヶ月が経過しで身につけたことを整理したくなってきたので
キャッチアップしやすかったGraphQLから整理していこうと思う。"/>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel="stylesheet">

	<link rel="stylesheet" type="text/css" media="screen" href="https://m-88888888.github.io/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://m-88888888.github.io/css/main.css" /><link rel="stylesheet" type="text/css" href="https://m-88888888.github.io/css/dark.css" media="(prefers-color-scheme: dark)" />

	<script src="https://m-88888888.github.io/js/feather.min.js"></script>
	
	<script src="https://m-88888888.github.io/js/main.js"></script>
</head>

<body>
	<div class="container wrapper post">
		<div class="header">
	<base href="https://m-88888888.github.io/">
	<h1 class="site-title"><a href="https://m-88888888.github.io/">hachi&#39;s blog</a></h1>
	<div class="site-description"><h2>いろいろアウトプット</h2><nav class="nav social">
			<ul class="flat"><a href="https://github.com/m-88888888" title="Github"><i data-feather="github"></i></a><a href="https://twitter.com/hachi88_10" title="Twitter"><i data-feather="twitter"></i></a></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">All posts</a>
			</li>
			
			<li>
				<a href="/about">About</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post-header">
			<h1 class="title">GraphQL整理</h1>
			<div class="meta">Posted at &mdash; Feb 7, 2021</div>
		</div>

		<div class="markdown">
			<p>マイクロサービス案件に参画して4ヶ月が経過しで身につけたことを整理したくなってきたので
キャッチアップしやすかったGraphQLから整理していこうと思う。</p>
<h1 id="graphqlって何">GraphQLって何？</h1>
<p>公式によると</p>
<blockquote>
<p>GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data. GraphQL provides a complete and understandable description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools.</p>
</blockquote>
<p>Google翻訳すると</p>
<blockquote>
<p>GraphQLは、APIのクエリ言語であり、既存のデータでこれらのクエリを実行するためのランタイムです。 GraphQLは、API内のデータの完全で理解しやすい説明を提供し、クライアントが必要なものだけを正確に要求できるようにし、時間の経過とともにAPIを進化させやすくし、強力な開発者ツールを有効にします。</p>
</blockquote>
<p>自分なりにまとめると</p>
<ul>
<li>クエリ言語
<ul>
<li>SQLはデータベースに対するクエリ言語</li>
<li>GraphQLはAPIに対するクエリ言語</li>
</ul>
</li>
<li>クライアントアプリケーションが、自分にとって必要な情報だけを要求することができる</li>
<li>エンドポイントが1つだけ</li>
</ul>
<h1 id="graphqlのクエリの定義">GraphQLのクエリの定義</h1>
<p>GraphQLはエンティティを次のような型で定義できる。</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql"><span style="color:#268bd2">type</span> <span style="color:#268bd2">User</span> {
    id Int!
    name String!
}
</code></pre></div><p>この定義された型を<code>Query型</code>を使って参照することができる。</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql"><span style="color:#268bd2">type</span> <span style="color:#268bd2">Query</span> {
    users: [<span style="color:#268bd2">User</span>!]!
    user(id: <span style="color:#268bd2">Int</span>!): <span style="color:#268bd2">User</span>!
}
</code></pre></div><p>これで参照するポイントは定義されたので、次は実際にDBからデータを取得する処理がまだ実装する。
GraphQLが提供する<code>resolvers</code>と呼ばれる関数を定義することで実現することができる。
クライアントがリクエストしたプロパティだけを返す処理についてはGraphQLがよしなにしてくれる。すごい。</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#586e75">// 実際はもっと色々な情報が必要。
</span><span style="color:#586e75"></span><span style="color:#268bd2">function</span> users() {
    <span style="color:#719e07">return</span> usersArray;
}

<span style="color:#268bd2">function</span> user({id}) {
    <span style="color:#719e07">return</span> usersArray.find((user) =&gt; user.id <span style="color:#719e07">==</span> id)
}

</code></pre></div><p>こうすることによって、次のようなQueryを実行できるようになる。</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{
    <span style="color:#586e75"># userのコレクションを取得</span>
    users {
        id
        name
    }

    <span style="color:#586e75"># id=001のユーザーのnameを取得</span>
    user(id: <span style="color:#268bd2">001</span>) {
        name
    }
}
</code></pre></div><p>その他の詳細なQueryやMutation、他の機能については追々まとめるつもり&hellip;</p>
		</div>

		<div class="post-tags">
			
				
					<nav class="nav tags">
							<ul class="flat">
								
								<li><a href="/tags/graphql">graphql</a></li>
								
							</ul>
					</nav>
				
			
		</div>
		<div id="disqus_thread"></div>
<script type="text/javascript">
	(function () {
		
		
		if (window.location.hostname == "localhost")
			return;

		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		var disqus_shortname = 'localhost';
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
		Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div> © Copyright m-88888888 |  <a href="https://github.com/vividvilla/ezhil">Ezhil theme</a> | Built with <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>



<script>feather.replace()</script>
</body>
</html>
